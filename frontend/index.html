<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reach Out Bot - NGO Outreach Campaign</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ü§ñ Reach Out Bot</h1>
        <p class="subtitle">NGO Outreach Campaign Automation</p>
        <div class="header-status">
          <span id="status-badge" class="status-badge">‚óè</span>
          <span id="status-text">Connecting...</span>
        </div>
      </header>

      <main class="workflow-container">
        <!-- STEP 1: Enter Brief -->
        <section id="step-1" class="workflow-step">
          <h2>Step 1: Enter Campaign Brief</h2>
          <div class="form-section">
            <form id="brief-form" class="form">
              <div class="form-group">
                <label for="campaign-brief"
                  >Campaign Brief (copy/paste here)</label
                >
                <textarea
                  id="campaign-brief"
                  placeholder="Paste your campaign brief here to find matching NGOs..."
                  rows="6"
                >
We're launching a collaborative initiative to protect marine ecosystems and restore coral reefs. We believe organizations focused on ocean conservation, marine protection, and coastal restoration could be powerful partners in this effort. We'd love to explore potential synergies and ways we might work together to safeguard our oceans for future generations.</textarea
                >
              </div>
              <button
                type="button"
                class="btn btn-primary"
                onclick="searchNGOs()"
              >
                üîç Search for Matching NGOs
              </button>
              <div id="brief-output" class="output"></div>
            </form>
          </div>
        </section>

        <!-- STEP 2: Review NGOs -->
        <section id="step-2" class="workflow-step" style="display: none">
          <h2>Step 2: Select NGOs for Outreach</h2>
          <div id="ngos-table-container" class="table-container">
            <table id="ngos-table" class="ngo-table">
              <thead>
                <tr>
                  <th>
                    <input
                      type="checkbox"
                      id="select-all"
                      onchange="toggleSelectAll()"
                    />
                  </th>
                  <th>Organization Name</th>
                  <th>Email</th>
                  <th>Geography</th>
                  <th>Focus Areas</th>
                  <th>Fit Rationale</th>
                  <th>Partner Status</th>
                  <th>Risk Score</th>
                  <th>Risk Summary</th>
                </tr>
              </thead>
              <tbody id="ngos-tbody"></tbody>
            </table>
          </div>
          <div class="button-group">
            <button
              class="btn btn-primary"
              onclick="generateEmailsForSelected()"
            >
              ‚úâÔ∏è Generate Emails for Selected NGOs
            </button>
            <button class="btn btn-secondary" onclick="goBack(1)">
              ‚Üê Back to Brief
            </button>
          </div>
          <div id="ngos-output" class="output"></div>
        </section>

        <!-- STEP 3: Review & Approve -->
        <section id="step-3" class="workflow-step" style="display: none">
          <h2>Step 3: Review & Approve Emails</h2>

          <div class="email-carousel">
            <div class="carousel-header">
              <h3 id="current-email-org">
                Email <span id="current-email-index">1</span> of
                <span id="total-emails">1</span>
              </h3>
              <div class="carousel-nav">
                <button
                  class="btn btn-secondary"
                  onclick="previousEmail()"
                  id="prev-btn"
                >
                  ‚Üê Previous
                </button>
                <button
                  class="btn btn-secondary"
                  onclick="nextEmail()"
                  id="next-btn"
                >
                  Next ‚Üí
                </button>
              </div>
            </div>

            <div id="email-preview" class="email-preview">
              <div class="email-content">
                <p><strong>To:</strong> <span id="email-to"></span></p>
                <p>
                  <strong>Subject:</strong>
                  <input
                    type="text"
                    id="email-subject"
                    class="email-subject-input"
                    placeholder="Email subject..."
                  />
                </p>
                <hr />
                <div class="email-body-container">
                  <label for="email-body" class="email-body-label"
                    ><strong>Email Body:</strong></label
                  >
                  <textarea
                    id="email-body"
                    class="email-body-textarea"
                    placeholder="Compose your email..."
                    rows="12"
                  ></textarea>
                </div>
              </div>
            </div>

            <div class="approval-section">
              <div class="form-group">
                <label for="approval-notes">Approval Notes (optional)</label>
                <textarea
                  id="approval-notes"
                  placeholder="Add any notes for the approval record..."
                  rows="3"
                ></textarea>
              </div>
              <div class="button-group">
                <button class="btn btn-success" onclick="approveAndSendEmail()">
                  ‚úì Approve & Send
                </button>
                <button class="btn btn-danger" onclick="skipEmail()">
                  ‚äò Skip This Email
                </button>
                <button class="btn btn-secondary" onclick="goBack(2)">
                  ‚Üê Back to Selection
                </button>
              </div>
            </div>

            <div id="approval-output" class="output"></div>
          </div>
        </section>

        <!-- STEP 4: Summary -->
        <section id="step-4" class="workflow-step" style="display: none">
          <h2>Step 4: Campaign Summary</h2>
          <div class="summary-section">
            <h3>Campaign Details</h3>
            <p>
              <strong>Name:</strong> <span id="summary-campaign-name"></span>
            </p>
            <p>
              <strong>Total NGOs Selected:</strong>
              <span id="summary-total-ngos"></span>
            </p>
            <p>
              <strong>Emails Sent:</strong>
              <span id="summary-sent-count"></span>
            </p>
            <p>
              <strong>Emails Skipped:</strong>
              <span id="summary-skipped-count"></span>
            </p>
          </div>

          <div class="summary-section">
            <h3>Sent Emails</h3>
            <div id="sent-emails-list" class="emails-list">
              <p class="placeholder">No emails sent yet.</p>
            </div>
          </div>

          <div class="button-group">
            <button class="btn btn-secondary" onclick="startNewCampaign()">
              üîÑ Start New Campaign
            </button>
          </div>
        </section>
      </main>
    </div>

    <script src="app.js"></script>
  </body>
</html>
